{% extends "base.html" %}
{% block title %}
<title>{{ article.title }}</title>
{% endblock %}

{% block content %}
<div class = "maincontainer"; style="border: thin solid black; float:left">
<div class = "content_block_show_recipe">	
   <br>
   <br>
   <h1> {{ article.title }} </h1>
   <br>
   {% if article.photo %}
   <img src="/static/{{article.photo}}" alt="hello"</img>
   <br><br>
   {% endif %}

   <!--All h4 tags inside content_block_show_recipe have margin-bottom property set in base.html-->   
   {% if article.note %}
   <span> {{ article.note|linebreaks }} </span>
   {% endif %}
   <br>     
   {% for key,value in ingredient.items %}
	<h4>{{ key }} </h4>
	<table>
	{% for val in value %}
		<tr>
		{% for v in val%}
  			<td>{{ v }}</td>
		{% endfor %}
		</tr>
	{% endfor %}
	</table><br>
   {% endfor %}

     <h4>Directions</h4>
     {% load my_custom_filters %}
     {% for value in direction %}
	  {% if '<h>' in value %}
	  <h4>{{ value |extract_from_h_tag}}</h4>
	  {% else %}
	  <div class= "directions_show_recipe">
	       <span> {{ value |linebreaks }} </span>
	  </div>
	  {% endif %}
     {% endfor %}	
   
   
   <br>
   
   {% if article.tips %}
   <h4> Tips </h4>
   <span>{{ article.tips|linebreaks }} </span>
   {% endif %}

   <br>
      <div class = "navmenu">
        <ul>
	 <li><a style="width:100px;" href="/recipes/{{article.recipe_type}}/{{article.title.split|join:"-"}}/like/">Like </a> </li>
        </ul>
      </div>
      
      <div style="padding-top:5px; font-size: 17px;">
   	  +{{article.likes}}
      </div>
	
      <div style="text-align:right">
          <span class = "posted_show_recipe"> Posted by Surekha on {{article.pub_date }} </span>
      </div>
      <br>
     <div style="width:400px;">
      {% if comments|length = 0 %}
      <span style="font-weight:bold">No comments </span> <br><br>
      {% else %}
      <span style="font-weight:bold">{{comments|length}} comments</span><br><br>
      {% for comment in comments %}
          {% if comment.name %}
             <span style="font-weight:bold">{{comment.name }} said..</span><br>
          {% else %}
             <span style="font-weight:bold">Anonymous said</span><br>	
	  {% endif %}
          {{comment.comment}}<br>
          {{comment.date}}<br><br>
	  
	  <!-- using the unique ids for making javascript to create div elements properly -->
	  <input type = "button" name = {{comment.id|concatenate_two_strings_firstdiv }} value ="Reply" onclick = you_hovered(this.name,{{comment.id}},"{{article.recipe_type}}","{{recipe_title_url_format}}") </input>
	  <div id={{comment.id|concatenate_two_strings_firstdiv}}> </div>

	  {% for key,value in comment_reply_dictionary.items%}
	       {%for id,date,comment_val,unique_id,name in value%}
		    {% if id == comment.id%}
			 <div style="margin-left: 50px;">
			 <br>
			 {% if name %}
			      <span style="font-weight:bold">{{name }} said..</span><br>
			 {% else %}
			      <span style="font-weight:bold">Anonymous said</span><br>
			 {% endif %}     
			 {{date}}<br>
	  		 {{comment_val}}<br><br>
			 <input type = "button" name = {{unique_id|concatenate_two_strings_seconddiv}} value ="Reply" onclick = you_hovered(this.name,{{comment.id}},"{{article.recipe_type}}","{{recipe_title_url_format}}") </input>
			 <div id={{unique_id|concatenate_two_strings_seconddiv}}> </div>
			 </div>
			 <br>
			 <div style="margin-left: 50px;border:thin dotted #B0B0B0">	   </div>
		    {% endif %}
	       {% endfor %}
	  <br>
	  {% endfor %}	  

	  
	  <!--This below div is just for providing dotted line under each comment -->
	  <div style="border:thin dotted #B0B0B0">	   </div>
	  <br>
      {% endfor %}
      {% endif %}
     </div>
     
<form action="/recipes/comments/" method="post"> {% csrf_token %}
        <span style="font-weight:bold">Enter your name</span><br>
	<textarea name="name" cols="40" rows="1"></textarea><br>
	<span style="font-weight:bold">Enter your comment</span><br> 
	<textarea name="comment" cols="40" rows="10"></textarea>
	<input type="hidden" name = "recipe_type" value= {{article.recipe_type}}>
	<input type="hidden" name = "recipe_title" value= {{recipe_title_url_format}}>
	<input type="hidden" name = "recipe_id" value= "{{article.id}}">
	<input type="submit" value="submit" />

</form>

</div>
<!--All <a> tags have font-weight:bold.. check base.html -->
   <div class ="navigation_did_you_know_show_recipe">
   <ul style="line-height:31px; width:250px;">
   <li class = "radial_gradient" style ="width:250px;">		
   <a style="color: #FE2E9A;font-size: 16px;text-decoration:none;" href="#">
	Did you know?
   </a>
   </li>

   <span style="color: #FE2E9A;font-size: 16px;">{{ article.did_you_know }}</span>

   </ul>
   </div>

   <div class = "navigation_show_recipe">
   <ul style="line-height:25px; width:250px;display: block;">
   <li class = "radial_gradient" style ="width:250px;display: inline-block">		
   <a style="color: #FE2E9A;font-size: 16px;text-decoration:none;display: block;" href="#">
	Latest recipes
   </a>
   </li>

   {% for recipe in latest_recipes_nine %}
	  <li style= "width:250px;list-style:none;float:left; border-bottom: thin dotted black;display: inline-block"> 
           <a style="color: #FE2E9A;display: block;font-weight: normal;font-size: 16px" href="/recipes/{{ recipe.recipe_type }}/{{ recipe.title.split|join:"-" }}/"> 
	   {{recipe.title}}
           </a> 
           </li>
   {% endfor %}
   {% for recipe in latest_recipe_tenth %}
           <li style= "width:250px;list-style:none;float:left;display: inline-block"> 
           <a style="color: #FE2E9A;display: block;font-weight: normal;font-size: 16px" href="/recipes/{{ recipe.recipe_type }}/{{ recipe.title.split|join:"-" }}/"> 
	   {{recipe.title}}
           </a> 
           </li>
   {% endfor %}   


   <li class = "radial_gradient" style ="width:250px;display: inline-block">		
    <a style="text-align:center; color: #FE2E9A;font-size: 16px;text-decoration:none;display: block;" href="#">
	Popular recipes
    </a>
    </li>
    {% for recipe in popular_recipes_nine %}
         <li style= "width:250px;list-style:none;float:left;border-bottom: thin dotted black;display: inline-block"> 
         <a style="color: #FE2E9A;display: block;font-weight: normal;font-size: 16px" href="/recipes/{{ recipe.recipe_type }}/{{ recipe.title.split|join:"-" }}/"> 
	       {{recipe.title}} 
         </a>
         </li>
    {% endfor %}
    
     {% for recipe in popular_recipe_tenth %}
           <li style= "width:250px;list-style:none;float:left;display: inline-block"> 
           <a style="color: #FE2E9A;display: block;font-weight: normal;font-size: 16px" href="/recipes/{{ recipe.recipe_type }}/{{ recipe.title.split|join:"-" }}/"> 
	   {{recipe.title}}
           </a> 
           </li>
     {% endfor %} 
    
    </ul>
    </div>

</div>
{% endblock %}
